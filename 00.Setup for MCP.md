# Setup for MCP (Model Context Protocol)

---

## üìö Table of Contents

1. [What is MCP?](#what-is-mcp)
2. [Prerequisites](#prerequisites)
3. [System Requirements](#system-requirements)
4. [Installation Options](#installation-options)
5. [Environment Setup with uv (Recommended)](#environment-setup-with-uv-recommended)
6. [Environment Setup with pip (Alternative)](#environment-setup-with-pip-alternative)
7. [Claude Desktop Integration](#claude-desktop-integration)
8. [Your First MCP Server](#your-first-mcp-server)
9. [Testing Your Setup](#testing-your-setup)
10. [Troubleshooting](#troubleshooting)
11. [Key Takeaways](#key-takeaways)
12. [Additional Resources](#additional-resources)

---

## What is MCP?

The **Model Context Protocol (MCP)** is an open standard developed by Anthropic that enables Large Language Models (LLMs) to interact seamlessly with external tools, data sources, and applications. Think of it as a **universal adapter** that connects AI assistants like Claude to the outside world.

### Core MCP Concepts

MCP provides three main primitives:

| Primitive | Description | Example |
|-----------|-------------|---------|
| **üîß Tools** | Functions that LLMs can call (with user approval) | Fetch weather data, query databases |
| **üìÅ Resources** | File-like data that clients can read | API responses, file contents |
| **üìù Prompts** | Pre-written templates for specific tasks | Code review template, analysis prompt |

### How MCP Works

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                 ‚îÇ       ‚îÇ                 ‚îÇ       ‚îÇ                 ‚îÇ
‚îÇ   LLM Client    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ   MCP Server    ‚îÇ‚óÑ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫‚îÇ  External API   ‚îÇ
‚îÇ  (e.g., Claude) ‚îÇ  MCP  ‚îÇ  (Your Code)    ‚îÇ HTTP  ‚îÇ  (Weather, DB)  ‚îÇ
‚îÇ                 ‚îÇ       ‚îÇ                 ‚îÇ       ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Prerequisites

Before setting up MCP, ensure you have the following:

### Required Knowledge

- ‚úÖ Basic Python programming
- ‚úÖ Understanding of command line/terminal usage
- ‚úÖ Familiarity with virtual environments
- ‚úÖ Basic understanding of LLMs (like Claude)

### Required Software

- ‚úÖ **Python 3.10+** installed on your system
- ‚úÖ A code editor (VS Code recommended)
- ‚úÖ **Claude Desktop** (for testing with Claude) - [Download here](https://claude.ai/download)

---

## System Requirements

| Component | Minimum Requirement |
|-----------|---------------------|
| **Python** | 3.10 or higher |
| **MCP SDK** | 1.2.0 or higher |
| **OS** | Windows, macOS, or Linux |
| **RAM** | 4GB (8GB recommended) |

### Check Your Python Version

```bash
python --version
# Should output: Python 3.10.x or higher
```

If you need to install Python, visit [python.org](https://www.python.org/downloads/)

---

## Installation Options

MCP provides two main installation methods:

| Method | Best For | Package Manager |
|--------|----------|-----------------|
| **uv** (Recommended) | New projects, faster installs | `uv add "mcp[cli]"` |
| **pip** | Existing projects | `pip install mcp` |

---

## Environment Setup with uv (Recommended)

`uv` is a fast Python package installer and resolver, recommended by the official MCP documentation.

### Step 1: Install uv

**On macOS/Linux:**

```bash
curl -LsSf https://astral.sh/uv/install.sh | sh
```

**On Windows (PowerShell):**

```powershell
powershell -ExecutionPolicy ByPass -c "irm https://astral.sh/uv/install.ps1 | iex"
```

### Step 2: Create a New MCP Project

```bash
# Create a new directory for your project
uv init my-mcp-server
cd my-mcp-server

# Create and activate virtual environment
uv venv

# On macOS/Linux:
source .venv/bin/activate

# On Windows:
.venv\Scripts\activate
```

### Step 3: Install MCP Dependencies

```bash
# Install MCP with CLI tools and HTTP client
uv add "mcp[cli]" httpx

# Verify installation
# On Linux
uv pip list | grep mcp

# On Windows
uv pip list | Select-String mcp
```

### Project Structure After Setup

```
my-mcp-server/
‚îú‚îÄ‚îÄ .venv/                  # Virtual environment
‚îú‚îÄ‚îÄ .python-version         # Python version file
‚îú‚îÄ‚îÄ hello.py                # Sample file (created by uv init)
‚îú‚îÄ‚îÄ pyproject.toml          # Project configuration
‚îú‚îÄ‚îÄ README.md               # Project readme (created by uv init)
‚îú‚îÄ‚îÄ uv.lock                 # Dependency lock file
‚îî‚îÄ‚îÄ server.py               # Your MCP server (create this)
```

---

## Environment Setup with pip (Alternative)

If you prefer using traditional pip and venv:

### Step 1: Create Virtual Environment

```bash
# Create project directory
mkdir my-mcp-server
cd my-mcp-server

# Create virtual environment(if not created by uv)
python -m venv .venv

# Activate virtual environment
# On macOS/Linux:
source .venv/bin/activate

# On Windows:
.venv\Scripts\activate
```

### Step 2: Install MCP Package

```bash
# Install MCP
pip install mcp

# Install additional dependencies for HTTP requests
pip install httpx

# Verify installation
pip show mcp
```

> **üì¶ Package Info:** The MCP package is available on [PyPI](https://pypi.org/project/mcp/) as `mcp`.

---

## Claude Desktop Integration

To use your MCP server with Claude Desktop, you need to configure the `claude_desktop_config.json` file.

### Step 1: Locate the Config File

| Operating System | Config File Location |
|------------------|---------------------|
| **macOS** | `~/Library/Application Support/Claude/claude_desktop_config.json` |
| **Windows** | `%APPDATA%\Claude\claude_desktop_config.json` |
| **Linux** | `~/.config/claude/claude_desktop_config.json` |

### Step 2: Create/Edit the Config File

Open the config file with your favorite editor:

**macOS (with VS Code):**

```bash
code ~/Library/Application\ Support/Claude/claude_desktop_config.json
```

**Windows (PowerShell):**

```powershell
code "$env:APPDATA\Claude\claude_desktop_config.json"
```

### Step 3: Configure Your MCP Server

Add your server configuration:

```json
{
  "mcpServers": {
    "my-server": {
      "command": "uv",
      "args": [
        "--directory",
        "C:/path/to/your/my-mcp-server",
        "run",
        "server.py"
      ]
    }
  }
}
```

> ‚ö†Ô∏è **Important Notes:**
>
> - Use **absolute paths** for the directory
> - On Windows, use forward slashes (`/`) or escaped backslashes (`\\`)
> - The `command` should be the full path to `uv` if not in PATH

### Getting the Correct Paths

```bash
# Find uv location
# On macOS/Linux:
which uv

# On Windows:
where uv

# Get current directory path (for --directory argument)
# On macOS/Linux:
pwd

# On Windows:
cd
```

---

## Your First MCP Server

Let's create a simple MCP server that provides a greeting tool.

### Create `server.py`

```python
"""
My First MCP Server
A simple server that demonstrates MCP tool creation.
"""

from mcp.server.fastmcp import FastMCP

# Initialize the FastMCP server with a name
mcp = FastMCP("greeting-server")


@mcp.tool()
def greet(name: str) -> str:
    """
    Generate a friendly greeting.
    
    Args:
        name: The name of the person to greet
    
    Returns:
        A personalized greeting message
    """
    return f"Hello, {name}! Welcome to the world of MCP! üéâ"


@mcp.tool()
def add_numbers(a: float, b: float) -> float:
    """
    Add two numbers together.
    
    Args:
        a: First number
        b: Second number
    
    Returns:
        The sum of the two numbers
    """
    return a + b


@mcp.tool()
def get_current_time() -> str:
    """
    Get the current date and time.
    
    Returns:
        Current date and time as a formatted string
    """
    from datetime import datetime
    return datetime.now().strftime("%Y-%m-%d %H:%M:%S")


def main():
    """Run the MCP server with stdio transport."""
    mcp.run(transport="stdio")


if __name__ == "__main__":
    main()
```

### Key Components Explained

| Component | Purpose |
|-----------|---------|
| `FastMCP("name")` | Initialize server with a unique name |
| `@mcp.tool()` | Decorator to register a function as an MCP tool |
| `docstring` | Describes the tool for the LLM |
| `type hints` | Define input/output types for validation |
| `mcp.run(transport="stdio")` | Start server with stdio communication |

---

## Testing Your Setup

### Method 1: Run Directly (You need a client to communicate with it)

```bash
# With uv:
uv run server.py

# With pip:
python server.py
```

### Method 2: Test with Claude Desktop

1. **Restart Claude Desktop** after configuring `claude_desktop_config.json`
2. Look for the **Connectors** in the Claude interface
3. Your server should appear in the list of connected servers or else config it manually inside Manage Connectors.
4. Try asking Claude: *"Can you greet me using the greeting tool?"*

### Method 3: Use MCP Inspector

The **MCP Inspector** is an interactive, browser-based developer tool for testing and debugging MCP servers. Think of it as **Postman for MCP** - it lets you test your tools without needing Claude Desktop.

#### Prerequisites

- **Node.js** must be installed on your system
- Verify with: `node --version`

#### Running MCP Inspector

**Option A: Inspect your local server directly**

```bash
# General syntax
npx @modelcontextprotocol/inspector <command> <args>

# For Python servers with uv
npx @modelcontextprotocol/inspector uv --directory path/to/server run server.py

```

**Option B: Run Inspector and connect via UI**

```bash
# Just launch the Inspector (without specifying a server)
npx @modelcontextprotocol/inspector
```

This opens the Inspector at `http://localhost:6274` where you can configure your server connection manually.

**Step-by-step UI Connection:**

1. **Open the Inspector** in your browser at `http://localhost:6274`

2. **In the left sidebar**, you'll see the **Server Connection** panel with these fields:

   | Field | Value for Our Server |
   |-------|---------------------|
   | **Transport Type** | `STDIO` |
   | **Command** | `uv` |
   | **Arguments** | `run server.py` |
   | **Environment Variables** | (leave empty) |

3. **Set the working directory** (if available) or ensure you launched the Inspector from your project folder

4. **Click "Connect"** to establish the connection

5. **Verify connection** - The status should change to "Connected" and you'll see your tools listed

> **üí° Tip:** Running the Inspector from inside your project folder (`my-mcp-server`) makes it easier because you don't need to specify the full path.

**Example: Connecting from Project Folder**

```powershell
# Navigate to your project
cd "C:\Users\admin\path\to\server"

# Launch Inspector
npx @modelcontextprotocol/inspector

# Then in the UI:
# - Transport: STDIO
# - Command: uv
# - Arguments: run server.py
# - Click Connect
```

#### MCP Inspector Interface

Once connected, you'll see these tabs:

| Tab | Purpose |
|-----|---------|
| **üîß Tools** | List all available tools, test them with custom inputs, see results |
| **üìÅ Resources** | View available resources, inspect content, test subscriptions |
| **üìù Prompts** | Display prompt templates, test with arguments, preview messages |
| **üîî Notifications** | Monitor real-time logs and notifications from your server |

#### Testing Your Server with Inspector

1. **Launch Inspector with your server (inside server directory, e.g., `my-mcp-server`):**

   ```bash
   npx @modelcontextprotocol/inspector uv run server.py
   ```

2. **Open the browser** at `http://localhost:6274`

3. **Click the "Tools" tab** to see your registered tools:
   - `greet`
   - `add_numbers`
   - `get_current_time`

4. **Test a tool:**
   - Click on `greet`
   - Enter a name in the input field (e.g., "Alice")
   - Click **"Run Tool"**
   - See the result: `"Hello, Alice! Welcome to the world of MCP! üéâ"`

#### Why Use MCP Inspector?

| Use Case | Benefit |
|----------|---------|
| **Initial Development** | Verify tools work before connecting to Claude |
| **Debugging** | See raw JSON requests/responses |
| **Schema Validation** | Confirm your tool definitions are correct |
| **Quick Testing** | Faster iteration than restarting Claude Desktop |

---

## Troubleshooting

### Common Issues and Solutions

#### ‚ùå Python Version Too Old

```
Error: Python 3.10+ is required
```

**Solution:** Install Python 3.10 or higher from [python.org](https://www.python.org/downloads/)

---

#### ‚ùå MCP Package Not Found

```
ModuleNotFoundError: No module named 'mcp'
```

**Solution:** Ensure you've installed MCP in your virtual environment:

```bash
pip install mcp
# or
uv add mcp
```

---

#### ‚ùå Claude Desktop Not Detecting Server

**Solutions:**

1. Restart Claude Desktop completely
2. Verify the config file is valid JSON (use a JSON validator)
3. Check that paths are absolute and correct
4. Ensure the server file exists at the specified location

---

#### ‚ùå Logging Issues with stdio Transport

> **Important:** When using `stdio` transport, avoid `print()` statements!

**Why?** MCP uses stdout for communication. Regular print statements interfere with the protocol.

```python
# ‚ùå Bad - Don't do this!
print("Processing request...")

# ‚úÖ Good - Use logging instead
import logging
logging.basicConfig(level=logging.INFO, stream=sys.stderr)
logger = logging.getLogger(__name__)
logger.info("Processing request...")
```

---

#### ‚ùå Windows Path Issues

If your paths contain backslashes, escape them properly:

```json
{
  "mcpServers": {
    "my-server": {
      "command": "uv",
      "args": [
        "--directory",
        "C:\\Users\\username\\projects\\my-mcp-server",
        "run",
        "server.py"
      ]
    }
  }
}
```

Or use forward slashes (works on Windows too):

```json
"C:/Users/username/projects/my-mcp-server"
```

---

## Key Takeaways

| Topic | Key Points |
|-------|------------|
| **What is MCP?** | Open standard for connecting LLMs to external tools and data |
| **Core Primitives** | Tools, Resources, and Prompts |
| **Python Requirement** | Python 3.10+ required |
| **Recommended Setup** | Use `uv` for faster, modern package management |
| **Server Creation** | Use `FastMCP` class and `@mcp.tool()` decorator |
| **Transport** | Use `stdio` for Claude Desktop integration |
| **Logging** | Never use `print()` with stdio; use `logging` to stderr |

---

## Additional Resources

### Official Documentation

- üìñ [MCP Official Documentation](https://modelcontextprotocol.io/)
- üêô [MCP GitHub Repository](https://github.com/modelcontextprotocol)
- üêç [Python SDK on GitHub](https://github.com/modelcontextprotocol/python-sdk)
- üì¶ [MCP Package on PyPI](https://pypi.org/project/mcp/)

### Quick Links

- üîß [Building MCP Servers](https://modelcontextprotocol.io/quickstart/server)
- üíª [Building MCP Clients](https://modelcontextprotocol.io/docs/develop/build-client)
- üîç [MCP Inspector Guide](https://modelcontextprotocol.io/docs/tools/inspector)

### Community & Examples

- üìö [Example Servers Repository](https://github.com/modelcontextprotocol/quickstart-resources)
- üéì [ApXML MCP Course](https://apxml.com/courses/getting-started-model-context-protocol)

---
